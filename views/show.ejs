<%- include('partials/header', { pageTitle: 'Post Details' }) %>
    <div class="space-y-2">
        <h2 class="text-2xl font-semibold text-slate-900">Post Details</h2>
        <p class="text-sm text-slate-500">Post id: <%= post.id %></p>
    </div>
    <article class="mt-4 rounded-lg border border-slate-200 bg-white p-5 shadow-sm">
        <h3 class="text-sm text-slate-500 font-semibold">@<%= post.username %></h3>
        <div class="mt-2 prose prose-slate max-w-none">
            <%- (function(){
                try {
                    const html = marked.parse(post.content || '', { breaks: true });
                    return DOMPurify.sanitize(html);
                } catch (e) { return post.content; }
            })() %>
        </div>
        <% if (post.tags && post.tags.length) { %>
            <div class="mt-3 flex flex-wrap gap-2">
                <% post.tags.forEach(function(t){ %>
                    <a href="/posts?tag=<%= encodeURIComponent(t) %>" class="inline-flex items-center px-2 py-0.5 text-xs rounded-full bg-red-50 text-red-700 border border-red-200">#<%= t %></a>
                <% }); %>
            </div>
        <% } %>
    </article>
    <div class="mt-6 flex gap-3">
        <button data-like-btn data-post-id="<%= post.id %>" class="px-4 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50">‚ù§ Like (<span data-like-count="<%= post.id %>"><%= post.likes || 0 %></span>)</button>
        <a href="/posts" class="px-4 py-2 rounded-md border border-slate-300 text-slate-700 hover:bg-slate-50">Back</a>
        <a href="/posts/<%= post.id %>/edit" class="px-4 py-2 rounded-md bg-red-700 text-white hover:bg-red-600">Edit</a>
        <form method="post" action="/posts/<%= post.id %>?_method=DELETE">
            <button data-delete-btn class="px-4 py-2 rounded-md border border-red-300 text-red-600 hover:bg-red-50">Delete</button>
        </form>
    </div>
<%- include('partials/footer') %>